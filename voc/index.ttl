@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix bot: <https://w3id.org/bot#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix ssn: <http://www.w3.org/ns/ssn/> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix schema: <http://schema.org/> .
@prefix dob: <https://w3id.org/dob/voc#> .

###################################################
### ONTOLOGY METADATA
###################################################

dob: a owl:Ontology ;
    dct:title "Open Built Environment Data Ontology"@en ;
    owl:imports prov:, sosa:, ssn:, bot:, dcat:, dct:, schema:;
    dct:license <http://creativecommons.org/licenses/by/4.0/> ;
    dct:creator [
        a foaf:Organization ;
        foaf:name "xRI" ;
        foaf:homepage <https://www.xri.online/>
    ] .

###################################################
### CLASSES
###################################################

dob:Result a owl:Class ;
    rdfs:label "Result"@en ;
    rdfs:comment "This class is limited to distinct and identifiable data points and and does not represent collections or aggregations of data. It is primarily used to present results of the combination of sensor data capture mediated by software processes."@en ;
    owl:unionOf (
        prov:Entity
        prov:Activity
    ) ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty sosa:hasFeatureOfInterest ;
        owl:allValuesFrom sosa:FeatureOfInterest
    ] ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty rdf:value ;
        owl:allValuesFrom [
            owl:unionOf (
                xsd:string
                xsd:double
                xsd:anyURI
                xsd:boolean
                xsd:dateTime
                xsd:integer
                xsd:float
                xsd:decimal
                xsd:time
                xsd:date
            )
        ]
    ] .


dob:SoftwarePipeline a owl:Class ;
    rdfs:subClassOf prov:Plan ;
    rdfs:label "Software Pipeline"@en ;
    rdfs:comment "A software-based workflow or pipeline that can be used by an Activity, specializing prov:Plan."@en .

dob:CodeRepository a owl:Class ;
    rdfs:subClassOf prov:Entity ,
                    schema:SoftwareSourceCode ;
    rdfs:label "Code Repository"@en ;
    rdfs:comment "A repository (e.g., Git) containing source code for a software pipeline."@en .

dob:CodeRevision a owl:Class ;
    rdfs:subClassOf 
        prov:Entity ,
        [
            a owl:Restriction ;
            owl:onProperty dob:tagURI ;
            owl:cardinality "1"^^xsd:nonNegativeInteger
        ] ;
    rdfs:label "Code Revision"@en ;
    rdfs:comment "A specific tagged revision of code in a repository."@en .

###################################################
### PROPERTIES
###################################################

dob:hasUPRN a owl:DatatypeProperty ;
    rdfs:label "Unique Property Reference Number"@en ;
    rdfs:subPropertyOf dct:identifier ;
    rdfs:comment "A unique numeric identifier for every spatial address in Great Britain."@en ;
    rdfs:seeAlso <https://www.geoplace.co.uk/addresses-streets/location-data/the-uprn> ;
    rdfs:domain bot:Zone ;
    rdfs:range xsd:integer .

### Code/Version Control-Related Properties
dob:tagURI a owl:DatatypeProperty ;
    rdfs:label "tag URL"@en ;
    rdfs:comment "A full external link for the tag (e.g., on GitHub)."@en ;
    rdfs:domain dob:CodeRevision ;
    rdfs:range xsd:anyURI .

dob:hasCodeRevision a owl:ObjectProperty ;
    rdfs:subPropertyOf prov:wasRevisionOf ;
    rdfs:label "has code revision"@en ;
    rdfs:comment "Links a Code Repository to the Code Revisions it contains."@en ;
    rdfs:domain dob:CodeRepository ;
    rdfs:range dob:CodeRevision .

dob:usedCodeRevision a owl:ObjectProperty ;
    rdfs:subPropertyOf prov:used ;
    rdfs:label "used revision"@en ;
    rdfs:comment "Links a Software Pipeline to a specific code revision used in its execution."@en ;
    rdfs:domain dob:SoftwarePipeline ;
    rdfs:range dob:CodeRevision .

