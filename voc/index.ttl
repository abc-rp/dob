@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix bot: <https://w3id.org/bot#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix ssn: <http://www.w3.org/ns/ssn/> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix dob: <https://w3id.org/dob/voc#> .

dob: a owl:Ontology ;
    dct:title "Open Built Environment Data Ontology"@en ;
    owl:imports prov:, sosa:, ssn:, bot:, dcat:, ;
    dct:license <http://creativecommons.org/licenses/by/4.0/> .

dob:Result a rdfs:Class , owl:Class ;
    rdfs:subClassOf prov:Entity ;
    rdfs:label "Result"@en ;
    rdfs:comment "The Result of an Activity. This class is limited to distinct and identifiable data points and does not represent collections or aggregations of data."@en ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty prov:isGeneratedBy ;
        owl:allValuesFrom [
            a owl:Restriction ;
            owl:onProperty ssn:forProperty ;
            owl:cardinality "1"^^xsd:nonNegativeInteger
        ]
    ] ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty prov:isGeneratedBy ;
        owl:allValuesFrom [
            a owl:Restriction ;
            owl:onProperty sosa:hasFeatureOfInterest ;
            owl:cardinality "1"^^xsd:nonNegativeInteger
        ]
    ] ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty prov:isGeneratedBy ;
        owl:cardinality "1"^^xsd:nonNegativeInteger
    ] .

dob:hasUPRN a rdf:Property ;
    rdfs:label "Unique Property Reference Number"@en ;
    rdfs:subPropertyOf dct:identifier ;
    rdfs:comment "A unique numeric identifier for every spatial address in Great Britain."@en ;
    rdfs:seeAlso <https://www.geoplace.co.uk/addresses-streets/location-data/the-uprn> ;
    rdfs:domain bot:Zone ;
    rdfs:range xsd:integer .

dob:usedProcedure a owl:ObjectProperty ;
    rdfs:comment "A relation that links to a re-usable Plan used in an Activity, including Software Pipelines."@en ;
    rdfs:subPropertyOf prov:used ;
    rdfs:domain prov:Activity ;
    rdfs:range prov:Plan .

dob:SoftwarePipeline a owl:Class ;
    rdfs:subClassOf prov:Plan ;
    rdfs:label "Software Pipeline"@en ;
    rdfs:comment "A software-based workflow or pipeline that can be used by an Activity, specializing prov:Plan."@en .

dob:wasAuthoredBy a owl:ObjectProperty ;
    rdfs:label "was authored by"@en ;
    rdfs:comment "Links a Software Pipeline (a prov:Plan) to its author (modeled as a prov:Agent)."@en ;
    rdfs:subPropertyOf prov:wasAttributedTo ;
    rdfs:domain dob:SoftwarePipeline ;
    rdfs:range prov:Agent .

dob:CodeRepository a rdfs:Class, owl:Class, prov:Entity ;
    rdfs:label "Code Repository"@en ;
    rdfs:comment "A repository (e.g., Git) containing source code for a software pipeline."@en .

dob:CodeRevision a rdfs:Class, owl:Class, prov:Entity ;
    rdfs:label "Code Revision"@en ;
    rdfs:comment "A particular revision of a repository, such as a Git commit or tag."@en .

dob:hasCodeRevision a owl:ObjectProperty ;
    rdfs:label "has code revision"@en ;
    rdfs:comment "Links a Software Pipeline to a specific code revision (commit or tag) it uses."@en ;
    rdfs:domain dob:SoftwarePipeline ;
    rdfs:range dob:CodeRevision .

dob:belongsToRepository a owl:ObjectProperty ;
    rdfs:label "belongs to repository"@en ;
    rdfs:comment "Links a code revision to the top-level code repository it belongs to."@en ;
    rdfs:domain dob:CodeRevision ;
    rdfs:range dob:CodeRepository .

dob:hasRepository a owl:ObjectProperty ;
    rdfs:subPropertyOf dct:source ;  
    rdfs:domain dob:SoftwarePipeline ;
    rdfs:range dob:CodeRepository ;
    rdfs:label "has repository"@en ;
    rdfs:comment "A link from a Software Pipeline plan to its associated code repository."@en .

dob:commitHash a owl:DatatypeProperty ;
    rdfs:subPropertyOf dct:identifier ;
    rdfs:label "commit hash"@en ;
    rdfs:comment "The specific commit hash or tag that identifies the repository revision."@en ;
    rdfs:domain dob:CodeRevision ;
    rdfs:range xsd:string .

dob:wasProcedureUsedIn a owl:ObjectProperty ;
    rdfs:label "was procedure used in"@en ;
    rdfs:comment "Inverse property of dob:usedProcedure, linking the Plan to the Activity in which it was used."@en ;
    rdfs:domain prov:Plan ;
    rdfs:range prov:Activity ;
    owl:inverseOf dob:usedProcedure .

dob:authored a owl:ObjectProperty ;
    rdfs:label "authored"@en ;
    rdfs:comment "Inverse of dob:wasAuthoredBy, linking an Agent to a Software Pipeline they authored."@en ;
    rdfs:domain prov:Agent ;
    rdfs:range dob:SoftwarePipeline ;
    owl:inverseOf dob:wasAuthoredBy .

dob:isRepositoryOf a owl:ObjectProperty ;
    rdfs:label "is repository of"@en ;
    rdfs:comment "Inverse of dob:hasRepository, linking the code repository back to the software pipeline."@en ;
    rdfs:domain dob:CodeRepository ;
    rdfs:range dob:SoftwarePipeline ;
    owl:inverseOf dob:hasRepository .
